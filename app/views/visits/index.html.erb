<div>
  <h1>Browse Visits for New Ideas</h1>
</div>

<table border="1">
  <tr>
    <th>Visit Date</th>
    <th>Salon Name</th>
    <th>Rating</th>
    <th>Comments</th>
    <th>Image</th>
    <th>Number of Likes</th>
    <% if @current_user != nil %>
      <th>Save this Idea!</th>
    <% else %>
    <% end %>
    <th></th>
  </tr>
  <% @list_of_visits.each do |a_visit| %>
  <tr>
    <td><%= a_visit.visit_date.strftime('%D') %></td>
    <td><%= a_visit.salon.name %></td>
    <td><%= a_visit.rating %></td>
    <td><%= a_visit.comment %></td>
    <td><img src="https://robohash.org/<%= a_visit.id %>"></td>
    <td><%= a_visit.likes_count %></td>
    <% if @current_user != nil %>
    <td>
      <% like = Like.where({ :fan_id => @current_user.id, :visit_id => a_visit.id }).at(0) %>
      <% if like == nil %>
      <form action="/insert_like" method="post">
        <input type="hidden" value="<%= a_visit.id %>" name="query_visit_id">
        <button>Like</button>
      </form>
      <% else %>
        <p>Saved for Later!</p>
        <a href="/delete_like/<%= like.id %>"><button>Remove</button></a>
      <% end %>
    </td>
    <% else %>
    <% end %>
    <td><a href="visits/<%= a_visit.id %>">View details</a></td>
  <tr>
  <% end %>
</table>



<div>
  <div>
    <h1>
      List of all visits
    </h1>
  </div>
</div>

<hr>

<div>
  <div>
    <h2>
      Add a new visit
    </h2>

    <form action="/insert_visit" method="post">
      <div>
        <label for="visit_date_box">
          Visit date
        </label>

        <input type="date" id="visit_date_box" name="query_visit_date">
      </div>

      <div>
        <label for="salon_id_box">
          Salon
        </label>

        <input type="text" id="salon_id_box" name="query_salon_id">
      </div>

      <div>
        <label for="rating_box">
          Rating
        </label>

        <input type="text" id="rating_box" name="query_rating">
      </div>

      <div>
        <label for="comment_box">
          Comment
        </label>

        <input type="text" id="comment_box" name="query_comment">
      </div>

      <div>
        <label for="image_box">
          Image
        </label>

        <input type="text" id="image_box" name="query_image">
      </div>

      <div>
        <label for="likes_count_box">
          Likes count
        </label>

        <input type="text" id="likes_count_box" name="query_likes_count">
      </div>

      <button>
        Create visit
      </button>
    </form>
  </div>
</div>

<hr>
<div>
  <div>
    <table>
      <tr>
        <th>
          ID
        </th>

        <th>
          Visit date
        </th>

        <th>
          User
        </th>

        <th>
          Salon
        </th>

        <th>
          Rating
        </th>

        <th>
          Comment
        </th>

        <th>
          Image
        </th>

        <th>
          Likes count
        </th>

        <th>
          Created at
        </th>

        <th>
          Updated at
        </th>

        <th>
        </th>
      </tr>

      <% @list_of_visits.each do |a_visit| %>
      <tr>
        <td>
          <%= a_visit.id %>
        </td>

        <td>
          <%= a_visit.visit_date %>
        </td>

        <td>
          <%= a_visit.user_id %>
        </td>

        <td>
          <%= a_visit.salon_id %>
        </td>

        <td>
          <%= a_visit.rating %>
        </td>

        <td>
          <%= a_visit.comment %>
        </td>

        <td>
          <%= a_visit.image %>
        </td>

        <td>
          <%= a_visit.likes_count %>
        </td>

        <td>
          <%= time_ago_in_words(a_visit.created_at) %> ago
        </td>
        <td>
          <%= time_ago_in_words(a_visit.updated_at) %> ago
        </td>

        <td>
          <a href="/visits/<%= a_visit.id %>">
            Show details
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>

<hr>
